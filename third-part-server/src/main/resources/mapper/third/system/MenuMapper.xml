<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jinyafu.jmall.mapper.third.system.MenuMapper">

    <select id="getAllMenuList" resultType="com.jinyafu.jmall.entity.third.system.Menu">
        select * from menu
    </select>
    
    <insert id="insertMenu" parameterType="com.jinyafu.jmall.entity.third.system.Menu">
        insert into menu
		(
			id,
			superId,
			name,
			flag,
			introduce,
			createTime,
			rank,
			type
		)
		values
		(
			#{id},
			#{superId},
			#{name},
			#{flag},
			#{introduce},
			now(),
			#{rank},
			#{type}
		)
    </insert>

    <update id="update" parameterType="com.jinyafu.jmall.entity.third.system.Menu">
        update menu set
        superId = #{superId},
        name = #{name},
        flag = #{flag},
        introduce = #{introduce},
        rank = #{rank},
        type = #{type}
        where id = #{id}
    </update>

    <delete id="delete" parameterType="string">
        delete from menu where id = #{id}
    </delete>

	<update id="updateMapBySelective" parameterType="map">
		update menu
		<set>
			<if test="superId != null and superId != ''">superId = #{superId},</if>
			<if test="name != null and name != ''">name = #{name},</if>
			<if test="flag != null and flag != ''">flag = #{flag},</if>
			<if test="introduce != null and introduce != ''">introduce = #{introduce},</if>
			<if test="rank != null ">rank = #{rank},</if>
			<if test="type != null ">type = #{type},</if>
		</set>
		where id=#{id}
	</update>

	<select id="queryList" parameterType="map" resultType="map">
		select * from menu
		<where>
			<if test="name != null and name != ''">and name like "%"#{name}"%"</if>
			<if test="superId != null and superId != ''">and superId = #{superId}</if>
			<if test="flag != null and flag != ''">and flag = #{flag}</if>
			<if test="idList!=null and idList.size() > 0">
				and id in
				<foreach item="item" index="index" collection="idList"  open="(" separator="," close=")">
					#{item}
				</foreach>
			</if>
			<if test="outIdList!=null and outIdList.size() > 0">
				and id not in
				<foreach item="item" index="index" collection="outIdList"  open="(" separator="," close=")">
					#{item}
				</foreach>
			</if>
			<if test="whereSQL != null and whereSQL != ''">${whereSQL}</if>
		</where>
		<if test="orderBy != null and orderBy != ''">${orderBy}</if>
		<if test="limit != null and limit != ''">${limit}</if>
	</select>

</mapper>