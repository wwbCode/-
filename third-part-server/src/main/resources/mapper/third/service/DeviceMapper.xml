<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jinyafu.jmall.mapper.third.service.DeviceMapper">

    <select id="queryList" parameterType="com.jinyafu.jmall.entity.data.service.DeviceDTO" resultType="map">
        select * from s_device
        <where>
            <if test="data.machineryRoom != null and data.machineryRoom != ''">and machineryRoom like "%"#{data.machineryRoom}"%"</if>
        </where>
    </select>

    <select id="list" resultType="map">
        select * from s_device
    </select>

    <insert id="insertDevice" parameterType="com.jinyafu.jmall.entity.third.service.Device">
        <selectKey keyProperty="id" resultType="String" order="BEFORE">
            select replace(uuid(),'-','') as id
        </selectKey>
        insert into s_device
        (
        id,
        machineryRoom,
        deviceAddress,
        managementAddress,
        deviceType,
        type,
        contact,
        contactType,
        specificAddress,
        remark
        )
        values
        (
        #{id},
        #{machineryRoom},
        #{deviceAddress},
        #{managementAddress},
        #{deviceType},
        #{type},
        #{contact},
        #{contactType},
        #{specificAddress},
        #{remark}
        )
    </insert>

    <update id="update" parameterType="com.jinyafu.jmall.entity.third.service.Server">
        update s_device
        set
        machineryRoom = #{machineryRoom},
        deviceAddress = #{deviceAddress},
        managementAddress = #{managementAddress},
        deviceType = #{deviceType},
        type = #{type},
        contact = #{contact},
        contactType = #{contactType},
        specificAddress = #{specificAddress},
        remark = #{remark}
        where id = #{id}
    </update>

    <select id="get" parameterType="string" resultType="com.jinyafu.jmall.entity.third.service.Device">
        select * from s_device where id = #{id}
    </select>

    <delete id="delete" parameterType="string">
        delete from s_device where id = #{id}
    </delete>
</mapper>